# Subscription Service

REST‚Äë—Å–µ—Ä–≤–∏—Å –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –æ–± –æ–Ω–ª–∞–π–Ω‚Äë–ø–æ–¥–ø–∏—Å–∫–∞—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.  
–ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–∞ Go (Gin), —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º PostgreSQL –∏ Docker Compose.  
–ó–∞–¥–∞–Ω–∏–µ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–æ –ø–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–º—É –∑–∞–¥–∞–Ω–∏—é (TZ) –∏ –¥–æ–ø–æ–ª–Ω–µ–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π –∏ —Ç–µ—Å—Ç–∞–º–∏.

---

## üìå –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- CRUDL‚Äë–æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞–¥ –∑–∞–ø–∏—Å—è–º–∏ –æ –ø–æ–¥–ø–∏—Å–∫–∞—Ö:
  - **Create** ‚Äì —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
  - **Read** ‚Äì –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏ –ø–æ ID
  - **Update** ‚Äì –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
  - **Delete** ‚Äì —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
  - **List** ‚Äì —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–¥–ø–∏—Å–æ–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
- –ü–æ–¥—Å—á—ë—Ç —Å—É–º–º–∞—Ä–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø–æ–¥–ø–∏—Å–æ–∫ –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥  
  —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ `user_id` –∏ –Ω–∞–∑–≤–∞–Ω–∏—é —Å–µ—Ä–≤–∏—Å–∞
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:
  - –≠–Ω–¥–ø–æ–∏–Ω—Ç `/login` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è `test-token` –ø–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º –ª–æ–≥–∏–Ω—É –∏ –ø–∞—Ä–æ–ª—é (`admin/password`)
  - Middleware –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ–∫–µ–Ω–∞ (`Authorization: Bearer test-token`)
  - –ß–∞—Å—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ —Å —Ç–æ–∫–µ–Ω–æ–º
- Swagger‚Äë–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (`/swagger/index.html`)
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ `.env` —Ñ–∞–π–ª
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (zap)
- –ú–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è PostgreSQL
- –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose
- Unit‚Äë—Ç–µ—Å—Ç—ã –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ö–µ–Ω–¥–ª–µ—Ä–æ–≤ (auth –∏ subscriptions)

```bash
subscriptions_service_golang/
‚îú‚îÄ‚îÄ cmd/
‚îÇ       ‚îî‚îÄ‚îÄ main.go              # —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Gin, —Ä–æ—É—Ç–æ–≤, DB
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ handlers/                # HTTP‚Äë—Ö–µ–Ω–¥–ª–µ—Ä—ã (auth, subscriptions)
‚îÇ   ‚îú‚îÄ‚îÄ middleware/              # auth‚Äëmiddleware
‚îÇ   ‚îú‚îÄ‚îÄ models/                  # GORM‚Äë–º–æ–¥–µ–ª–∏, DTO, –æ—à–∏–±–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ repositories/            # —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (PostgreSQL)
‚îÇ   ‚îî‚îÄ‚îÄ services/                # –±–∏–∑–Ω–µ—Å‚Äë–ª–æ–≥–∏–∫–∞
‚îú‚îÄ‚îÄ migrations/                  # SQL‚Äë–º–∏–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ pkg/
‚îÇ   ‚îî‚îÄ‚îÄ logger/                  # –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è zap‚Äë–ª–æ–≥–µ—Ä–∞
|   |__db.go
‚îú‚îÄ‚îÄ go.mod
‚îú‚îÄ‚îÄ go.sum
‚îú‚îÄ‚îÄ .env.example                 # —à–∞–±–ª–æ–Ω .env
‚îî‚îÄ‚îÄ docker-compose.yml           # Docker Compose –¥–ª—è –∑–∞–ø—É—Å–∫–∞
```



## üöÄ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫


# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å
```bash
docker compose up --build
```

### –°–µ—Ä–≤–∏—Å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:8080`.

---

## üõ†Ô∏è API‚Äë—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

- `POST /login` ‚Äì –ø–æ–ª—É—á–∏—Ç—å `test-token`
  - Body: `{"username": "admin", "password": "password"}`
  - Response: `{"token": "test-token"}`

### –ü–æ–¥–ø–∏—Å–∫–∏

- `POST /subscriptions` ‚Äì —Å–æ–∑–¥–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
- `GET /subscriptions/:id` ‚Äì –ø–æ–ª—É—á–∏—Ç—å –ø–æ ID
- `GET /subscriptions` ‚Äì —Å–ø–∏—Å–æ–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- `PUT /subscriptions/:id` ‚Äì –æ–±–Ω–æ–≤–∏—Ç—å
- `DELETE /subscriptions/:id` ‚Äì —É–¥–∞–ª–∏—Ç—å
- `GET /subscriptions/total` ‚Äì –ø–æ—Å—á–∏—Ç–∞—Ç—å —Å—É–º–º—É

### Swagger

- `GET /swagger/index.html` ‚Äì –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## üß™ –¢–µ—Å—Ç—ã

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
go test ./...
```

---

## üîë –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞

``` bash 
http
POST /login
Content-Type: application/json

{
  "username": "admin",
  "password": "password"
}
–û—Ç–≤–µ—Ç:

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞

–î–æ–±–∞–≤—å—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫:

``` bash 
Authorization: Bearer test-token
```
